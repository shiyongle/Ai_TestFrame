# æŠ•çŸ³é—®è·¯å¼€å‘æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

æŠ•çŸ³é—®è·¯æ˜¯ä¸€ä¸ªå¼€æºçš„å‰åç«¯åˆ†ç¦»çš„æ™ºèƒ½åŒ–æµ‹è¯•å¹³å°ï¼Œæ”¯æŒå¤šç§åè®®çš„æ¥å£æµ‹è¯•ï¼ŒåŒ…æ‹¬HTTPã€TCPã€MQç­‰ã€‚ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼Œæä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢å’Œå¼ºå¤§çš„æµ‹è¯•åŠŸèƒ½ã€‚

## æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: FastAPI (Python)
- **æ•°æ®åº“**: MySQL 5.7+ / 8.0+
- **ORM**: SQLAlchemy
- **æ•°æ®åº“é©±åŠ¨**: PyMySQL
- **é…ç½®ç®¡ç†**: python-dotenv
- **å¼‚æ­¥æ”¯æŒ**: asyncio, aiohttp
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery (é¢„ç•™)

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 18 + TypeScript
- **UIåº“**: Ant Design
- **è·¯ç”±**: React Router
- **HTTPå®¢æˆ·ç«¯**: Axios
- **çŠ¶æ€ç®¡ç†**: React Hooks

## é¡¹ç›®ç»“æ„

```
- ToushiWenLu/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ main.py             # FastAPIåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“é…ç½®å’Œæ¨¡å‹
â”‚   â”œâ”€â”€ schemas.py          # Pydanticæ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”‚   â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
â”‚   â”œâ”€â”€ init_mysql.sql      # MySQLæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ services/           # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚       â”œâ”€â”€ test_service.py # æµ‹è¯•æœåŠ¡
â”‚       â””â”€â”€ version_service.py # ç‰ˆæœ¬ç®¡ç†æœåŠ¡
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ App.tsx        # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â””â”€â”€ package.json       # Node.jsä¾èµ–
â”œâ”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ versions/              # ç‰ˆæœ¬è®°å½•ç›®å½•
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜
â””â”€â”€ start.bat              # Windowså¯åŠ¨è„šæœ¬
```

## æ ¸å¿ƒåŠŸèƒ½

### 1. é¡¹ç›®ç®¡ç†
- åˆ›å»ºå’Œç®¡ç†æµ‹è¯•é¡¹ç›®
- é¡¹ç›®é…ç½®å’Œæè¿°
- é¡¹ç›®çº§åˆ«çš„æµ‹è¯•ç”¨ä¾‹ç»„ç»‡

### 2. æµ‹è¯•ç”¨ä¾‹ç®¡ç†
- æ”¯æŒHTTPã€TCPã€MQåè®®
- æµ‹è¯•ç”¨ä¾‹çš„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- æµ‹è¯•é…ç½®çš„çµæ´»è®¾ç½®

### 3. HTTPæ¥å£æµ‹è¯•
- æ”¯æŒæ‰€æœ‰HTTPæ–¹æ³• (GET, POST, PUT, DELETEç­‰)
- è‡ªå®šä¹‰Headersã€Paramsã€Body
- SSLéªŒè¯å’Œé‡å®šå‘é…ç½®
- å“åº”æ—¶é—´å’ŒçŠ¶æ€ç ç›‘æ§

### 4. TCPæ¥å£æµ‹è¯•
- TCPè¿æ¥æµ‹è¯•
- æ•°æ®å‘é€å’Œæ¥æ”¶
- è¿æ¥è¶…æ—¶é…ç½®

### 5. MQæ¥å£æµ‹è¯•
- RabbitMQæ¶ˆæ¯é˜Ÿåˆ—æµ‹è¯•
- æ¶ˆæ¯å‘é€å’Œæ¥æ”¶éªŒè¯
- é˜Ÿåˆ—å’Œäº¤æ¢æœºé…ç½®

### 6. ç‰ˆæœ¬ç®¡ç†
- æµ‹è¯•ç”¨ä¾‹ç‰ˆæœ¬æ§åˆ¶
- å˜æ›´è®°å½•å’Œå›æº¯
- ç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½

### 7. æµ‹è¯•æŠ¥å‘Š
- è¯¦ç»†çš„æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Š
- æˆåŠŸç‡ç»Ÿè®¡
- é”™è¯¯ä¿¡æ¯è®°å½•

## æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“é…ç½®
ç³»ç»Ÿä½¿ç”¨MySQLä½œä¸ºä¸»æ•°æ®åº“ï¼Œæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®è¿æ¥å‚æ•°ï¼š

```bash
# .env æ–‡ä»¶é…ç½®ç¤ºä¾‹
MYSQL_USER=root
MYSQL_PASSWORD=password
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=test_system

# è¿æ¥æ± é…ç½®
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
```

### ä¸»è¦æ•°æ®è¡¨

1. **projects** - é¡¹ç›®è¡¨
   - id, name, description, created_at, updated_at
   - ç´¢å¼•ï¼šidx_projects_name

2. **testcases** - æµ‹è¯•ç”¨ä¾‹è¡¨
   - id, name, description, protocol, config, project_id
   - å¤–é”®ï¼šproject_id -> projects.id
   - ç´¢å¼•ï¼šidx_testcases_project, idx_testcases_protocol

3. **test_results** - æµ‹è¯•ç»“æœè¡¨
   - id, testcase_id, status, response_data, execution_time, error_message, executed_at
   - å¤–é”®ï¼štestcase_id -> testcases.id
   - ç´¢å¼•ï¼šidx_test_results_testcase, idx_test_results_status, idx_test_results_executed_at

4. **versions** - ç‰ˆæœ¬ç®¡ç†è¡¨
   - id, version_number, description, changes, created_at, created_by
   - ç´¢å¼•ï¼šidx_versions_number, idx_versions_created_at

5. **test_reports** - æµ‹è¯•æŠ¥å‘Šè¡¨
   - id, version_id, project_id, total_tests, passed_tests, failed_tests, error_tests, summary, created_at
   - å¤–é”®ï¼šversion_id -> versions.id, project_id -> projects.id
   - ç´¢å¼•ï¼šidx_test_reports_version, idx_test_reports_project, idx_test_reports_created_at

6. **test_data** - æµ‹è¯•æ•°æ®è¡¨
   - id, name, data_type, content, project_id, created_at, updated_at
   - å¤–é”®ï¼šproject_id -> projects.id
   - ç´¢å¼•ï¼šidx_test_data_project, idx_test_data_type

### æ•°æ®åº“åˆå§‹åŒ–
ä½¿ç”¨æä¾›çš„SQLè„šæœ¬åˆå§‹åŒ–æ•°æ®åº“ï¼š
```bash
mysql -u root -p < backend/init_mysql.sql
```

## APIæ¥å£æ–‡æ¡£

### é¡¹ç›®ç®¡ç†
- `GET /api/projects` - è·å–é¡¹ç›®åˆ—è¡¨
- `POST /api/projects` - åˆ›å»ºé¡¹ç›®
- `GET /api/projects/{id}` - è·å–é¡¹ç›®è¯¦æƒ…

### æµ‹è¯•ç”¨ä¾‹
- `GET /api/projects/{project_id}/testcases` - è·å–æµ‹è¯•ç”¨ä¾‹
- `POST /api/projects/{project_id}/testcases` - åˆ›å»ºæµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•æ‰§è¡Œ
- `POST /api/test/http` - æ‰§è¡ŒHTTPæµ‹è¯•
- `POST /api/test/tcp` - æ‰§è¡ŒTCPæµ‹è¯•
- `POST /api/test/mq` - æ‰§è¡ŒMQæµ‹è¯•
- `POST /api/test/batch` - æ‰§è¡Œæ‰¹é‡æµ‹è¯•

### ç‰ˆæœ¬ç®¡ç†
- `GET /api/versions` - è·å–ç‰ˆæœ¬åˆ—è¡¨
- `POST /api/versions` - åˆ›å»ºç‰ˆæœ¬è®°å½•

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Node.js 16+
- MySQL 5.7+ / 8.0+
- Git

### å¯åŠ¨æ–¹å¼

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ (æ¨è)
```bash
# Windows
start.bat
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨

**1. æ•°æ®åº“å‡†å¤‡**
```bash
# åˆ›å»ºMySQLæ•°æ®åº“
mysql -u root -p
CREATE DATABASE test_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
mysql -u root -p test_system < backend/init_mysql.sql

# é…ç½®ç¯å¢ƒå˜é‡
cd backend
cp .env .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯
```

**2. åç«¯å¯åŠ¨**
```bash
cd backend
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
uvicorn main:app --reload
```

**3. å‰ç«¯å¯åŠ¨**
```bash
cd frontend
npm install
npm start
```

### è®¿é—®åœ°å€
- å‰ç«¯ç•Œé¢: http://localhost:3000
- åç«¯API: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs

## å¼€å‘è®¡åˆ’

### å·²å®Œæˆ
- âœ… é¡¹ç›®æ¶æ„è®¾è®¡
- âœ… åç«¯APIæ¡†æ¶
- âœ… å‰ç«¯ç•Œé¢æ¡†æ¶
- âœ… HTTPæ¥å£æµ‹è¯•åŠŸèƒ½
- âœ… é¡¹ç›®å’Œæµ‹è¯•ç”¨ä¾‹ç®¡ç†
- âœ… MySQLæ•°æ®åº“é›†æˆ
- âœ… æ•°æ®åº“è¿æ¥æ± é…ç½®
- âœ… ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†

### å¼€å‘ä¸­
- ğŸš§ TCPæ¥å£æµ‹è¯•åŠŸèƒ½
- ğŸš§ MQæ¥å£æµ‹è¯•åŠŸèƒ½
- ğŸš§ ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ
- ğŸš§ æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

### è®¡åˆ’ä¸­
- ğŸ“‹ å¤šæ¥å£å…³è”å’Œä¾èµ–å¤„ç†
- ğŸ“‹ æ•°æ®ä¸è„šæœ¬åˆ†ç¦»
- ğŸ“‹ æ€§èƒ½æµ‹è¯•åŠŸèƒ½
- ğŸ“‹ æŒç»­é›†æˆæ”¯æŒ
- ğŸ“‹ ç”¨æˆ·æƒé™ç®¡ç†
- ğŸ“‹ æµ‹è¯•æ•°æ®ç®¡ç†

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚